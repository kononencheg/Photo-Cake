(function(){var d=void 0,g=!0,h=null,i=!1;function l(){return function(){}}function m(a){return function(b){this[a]=b}}function aa(a){return function(){return this[a]}}var o,ba=!!eval("'\v' == 'v'");function p(a,b){for(var c in b.prototype)"function"===typeof b.prototype[c]&&(a.prototype[c]=b.prototype[c])}function q(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a}function s(a,b){if(a.bind!==d)return a.bind(b);var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,c.concat(Array.prototype.slice.call(arguments)))}}
function ca(a){var b;if(a!==d&&a!==h&&!isNaN(a.length))return Array.prototype.slice.call(a);if(a instanceof Date)return new Date(a.getTime());if(a instanceof Object){b===d&&(b=[]);b.push(a);var c={},e;for(e in a)a.hasOwnProperty(e)&&-1===u(a[e],b)&&(c[e]=ca(a[e]));return c}return a}function da(a,b){var c=a===b;if(!c&&a!==h&&b!==h){var c=g,e;for(e in a)c=a[e]instanceof Object&&b[e]instanceof Object?c&&da(a[e],b[e]):c&&a[e]===b[e]}return c}
function u(a,b){if(b.indexOf!==d)return b.indexOf(a);for(var c=0,e=b.length;c<e;){if(b[c]===a)return c;c++}return-1}function ea(){this.z=h}ea.prototype.init=m("z");ea.prototype.get=function(a){return this.z[a]!==d?this.z[a]:h};var fa=new ea;function ga(a,b,c){a.Ib==d&&(a.Ib=function(b){if(b.qb!==d){var c=b.qb;delete b.qb;var c=a["__"+c],j;for(j in c)c[j].call(a,b)}},a.attachEvent("onhelp",a.Ib));a["__"+b]===d&&(a["__"+b]=[]);a["__"+b].push(c)}var v=h;function ha(a,b){return v!==h?v(a,b):h}function w(a,b){if(v!==h){var c=v(a,b);if(0<c.length)return c[0]}return h}function x(a,b,c,e){y(a,c,function(c){var j=c.target||c.srcElement,k=v.matches(b,[j])[0];k===d&&(k=ia(j,b,a));k!==h&&e.call(k,c)})}
function y(a,b,c){if(a.addEventListener!==d)a.addEventListener(b,c,i);else if(a.attachEvent!==d){var e="on"+b;a[e]===d?ga(a,b,c):a.attachEvent(e,c)}}function ja(a,b,c){function e(f){c.call(a,f);f=e;if(a.removeEventListener!==d)a.removeEventListener(b,f,i);else if(a.detachEvent!==d)if(a["on"+b]===d){var j=a["__"+b];if(j!==d)for(var k=j.length-1;0<=k;)j[k]===f&&j.splice(k,1),k--}else a.detachEvent("on"+b,f)}y(a,b,e)}function z(a){a.preventDefault!==d?a.preventDefault():a.returnValue=i}
function ka(a){a.stopPropagation!==d?a.stopPropagation():a.cancelBubble=g}function ia(a,b,c){for(a=a.parentNode;a!==h&&a!==c&&0===v.matches(b,[a]).length;)a=a.parentNode;return a===c?h:a}function la(a,b,c){for(a=a.parentNode;a!==h&&a!==c&&!A(a,b);)a=a.parentNode;return a===c?h:a}function A(a,b){return a.classList!==d?a.classList.contains(b):a.className!==d?a.className.match(RegExp("(\\s|^)"+b+"(\\s|$)"))!==h:i}function B(a,b){a.classList!==d?a.classList.add(b):A(a,b)||(a.className+=" "+b)}
function C(a,b){a.classList!==d?a.classList.remove(b):A(a,b)&&(a.className=a.className.replace(RegExp("(\\s|^)"+b+"(\\s|$)")," "))};function ma(a,b){this.a=h;this.hc=a;this.Fc=!!b;this.bc=this.dc=this.ac=i}ma.prototype.Ab=m("a");ma.prototype.preventDefault=function(){this.ac=g};ma.prototype.stopPropagation=function(){this.dc=g};function na(){}na.prototype.b=l();na.prototype.addEventListener=l();na.prototype.removeEventListener=l();na.prototype.qc=l();function D(a){this.fc=a||h;this.u={}}p(D,na);D.prototype.b=function(a,b){a instanceof ma||(a=new ma(a));var c=a.hc;if(this.u[c]!==d){a.a===h&&a.Ab(this);for(var e=0,f=this.u[c].length;e<f;){this.u[c][e].call(this,a,b);if(a.bc)break;e++}this.fc!==h&&a.Fc&&!a.bc&&!a.dc&&this.fc.b(a)}return!a.ac};D.prototype.addEventListener=function(a,b){this.u[a]===d?this.u[a]=[b]:this.qc(a,b)||this.u[a].push(b)};
D.prototype.removeEventListener=function(a,b){if(this.u[a]!==d){var c=u(b,this.u[a]);-1!==c&&this.u[a].splice(c,1)}};D.prototype.qc=function(a,b){return this.u[a]!==d?-1!==u(b,this.u[a]):i};function oa(){}q(oa,na);oa.prototype.send=l();oa.prototype.abort=l();function pa(a){D.call(this);this.Zb=a||"/";this.xb=i;this.method="GET";this.headers=[];this.t=this.Ma=this.z=h}p(pa,oa);q(pa,D);pa.prototype.setData=m("z");
pa.prototype.send=function(){var a=this.Zb;this.t!==h&&this.t.abort();var b=!ba?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(!this.xb){var c=this;b.onreadystatechange=function(){4===b.readyState&&(c.Ma=b.responseText,c.b("complete",c.Ma),b.abort())}}var e=qa(this.z).join("&");"GET"===this.method&&""!==e&&(a+=(-1===a.indexOf("?")?"?":"&")+e);b.open(this.method,encodeURI(a),!this.xb);for(a=this.headers.length-1;0<=a;)b.setRequestHeader(this.headers[a].name,this.headers[a].value),a--;
a=h;"POST"===this.method&&(b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a=e);b.send(a);this.xb&&(this.Ma=b.responseText,this.b("complete",this.Ma));this.t=b};pa.prototype.abort=function(){this.t!==h&&this.t.abort()};function qa(a,b){var c=[];b===d&&(b=[]);if(a!==h&&!(a instanceof Function))if(a instanceof Object)for(var e in a)c=c.concat(qa(a[e],0===b.length?[e]:(b.join(",")+","+e).split(",")));else c=[b.shift()+(0<b.length?"["+b.join("][")+"]=":"=")+encodeURIComponent(""+a)];return c}
function ra(){for(var a={},b=location.search.substr(1).split("][").join("|"),b=b.split("[").join("|"),b=b.split("]").join(""),b=b.split("&"),c=0,e=b.length,f=h,j=h,k=h,n=h;c<e;){f=b[c].split("=");j=f.shift().split("|");for(n=a;0<j.length;)k=j.shift(),0===j.length?n[k]=decodeURIComponent(f.shift()):n[k]===d&&(n[k]={}),n=n[k];c++}return a};function sa(){}sa.prototype.set=l();sa.prototype.get=l();sa.prototype.clear=l();function F(a,b){D.call(this);this.Ob=h;this.ec=a||h;this.Hc=b||h;this.g=[]}p(F,sa);q(F,D);o=F.prototype;o.load=function(a,b){var c=this;if(b||a===d||!da(this.Ob,a))this.ec!==h&&ta(this.ec,a||h,function(a){c.set(a)},this.Hc),this.Ob=a||h};o.set=function(a){this.g!==a&&(this.g=a,this.b("update",this.g))};o.get=aa("g");o.clear=function(){0<this.g.length&&(this.g.length=0,this.b("update",this.g))};
o.sa=function(a){for(var b=0,c=this.g.length;b<c&&!(this.g[b].id===a.id);)b++;this.g[b]=a;this.b("update",this.g)};function ua(a,b){for(var c=0,e=a.g.length;c<e;){if(a.g[c].id===b)return a.g[c];c++}return h}o.find=function(a){for(var b=[],c=0,e=this.g.length;c<e;)a(this.g[c])&&b.push(this.g[c]),c++;return b};o.map=function(a){for(var b=[],c=0,e=this.g.length,f=h;c<e;)f=a(this.g[c]),f!==h&&b.push(f),c++;return b};function va(a){for(var b=wa,c=0,e=b.g.length;c<e;)a(b.g[c]),c++};function G(){D.call(this);this.qa=h}p(G,sa);q(G,D);G.prototype.set=function(a){this.qa!==a&&(this.qa=a,this.b("update",this.qa))};G.prototype.get=aa("qa");G.prototype.clear=function(){this.qa=h;this.b("update",this.qa)};function H(a){this.id="";a!==d&&this.ga(a)}H.prototype.Ua=function(){var a=new this.constructor,b;for(b in this)this.hasOwnProperty(b)&&(a[b]=this[b]);return a};H.prototype.ga=l();H.prototype.o=l();var xa=new function(){this.la={}};function J(a,b){if(a!==h){if(a instanceof Array){for(var c=[],e=0,f=a.length;e<f;)c.push(a[e].o(b)),e++;return c}return a instanceof H?a.o(b):a}return h};function ya(){}ya.prototype.call=l();ya.prototype.Ua=l();function za(a){D.call(this);this.Gc=a||h}p(za,ya);q(za,D);za.prototype.call=l();za.prototype.Ua=function(){return new this.constructor(this.Gc)};function Aa(){}Aa.prototype.Va=l();function Ba(){this.Qb={};this.bb=h}p(Ba,Aa);Ba.prototype.Va=function(a){return this.Qb[a]!==d?this.Qb[a].Ua():this.bb!==h?this.bb.Va(a):h};var Ca=new Ba;function ta(a,b,c,e){var f=Ca.Va(a);if(c!==d){var j=function(a,b){var r=b;e!==h&&e!==d&&(r=Da(b,e));c(r);f.removeEventListener("result",j)};f.addEventListener("result",j)}f.call(b)}function Da(a,b){if(a!==h){if(a.splice!==d){for(var c=[],e=0,f=a.length;e<f;)c.push(Ea(a[e],b)),e++;return c}return Ea(a,b)}return h}
function Ea(a,b){var c=xa.la[b].Ua();c.ga(a);return c};function Fa(a,b,c){this.rb=a;this.D=b||h;this.Cc=c||h;this.ib=h;this.w={}}Fa.prototype.getParent=aa("D");Fa.prototype.getKey=function(){this.ib===h&&(this.ib=new Ga(this.Cc));return this.ib};Fa.prototype.wa=function(){return this.D!==h?this.D.wa():this};Fa.prototype.Fa=aa("rb");function Ha(a,b){var c=h;if(a.w[b]!==d)c=a.w[b];else if(a.rb!==h){var e=a.rb[b];e!==d?(a.w[b]=new Ga(e,a,b),c=a.w[b]):a.w[b]=Ia}return c}var Ga=Fa,Ia=new Ga(h);function Ja(){this.Wb=h}Ja.prototype.ha=function(a){this.Wb=a.split("/")};Ja.prototype.evaluate=function(a){a=Ka(this,this.Wb,a,0);return a!==h?a:Ia};function Ka(a,b,c,e){var f=b[e];return c!==h&&f!==d?Ka(a,b,La(f,c),++e):c}function La(a,b){switch(a){case "":return b.wa();case ".":return b;case "..":return b.getParent();case "$key":return b.getKey()}return Ha(b,a)};function K(){this.vb=this.Bb="";this.filter=h};function Ma(){K.call(this);this.kc="";this.pc=i}q(Ma,K);function Na(){K.call(this);this.uc=this.vc=this.ic=this.jc=""}q(Na,K);function Oa(){K.call(this)}q(Oa,K);function Pa(){K.call(this);this.sc=this.keyPath="";this.tc=h}q(Pa,K);function Qa(){this.Yb=[];this.Pb=[];this.Eb=[];this.Hb=[];this.Gb=[]};function Ra(){}Ra.prototype.nc=l();function L(){this.ra="spot";this.M="tuna:"}p(L,Ra);L.prototype.nc=function(a,b){for(var c=a.getElementsByTagName(ba?this.ra:this.M+this.ra),e=0,f=c.length,j=h;e<f;)j=this.G(),this.ca(c.item(e),j),this.Ca(j,b),e++};L.prototype.G=function(){return new K};L.prototype.ca=function(a,b){b.Bb=a.getAttribute(this.M+"target");b.vb=a.getAttribute(this.M+"path");b.filter=a.getAttribute(this.M+"filter")};L.prototype.Ca=function(a,b){b.Yb.push(a)};function Sa(a){L.call(this);this.ra="list";this.Dc=a}q(Sa,L);Sa.prototype.G=function(){return new Pa};Sa.prototype.ca=function(a,b){L.prototype.ca.call(this,a,b);b.sc=a.getAttribute(this.M+"item-renderer-id");b.keyPath=a.getAttribute(this.M+"key-path");var c=a.getAttribute(this.M+"item-template-id");b.tc=Ta(this.Dc,c)};Sa.prototype.Ca=function(a,b){b.Pb.push(a)};function Ua(){L.call(this);this.ra="attr"}q(Ua,L);Ua.prototype.G=function(){return new Ma};Ua.prototype.ca=function(a,b){L.prototype.ca.call(this,a,b);b.kc=a.getAttribute(this.M+"name");b.pc=!!a.getAttribute(this.M+"event")};Ua.prototype.Ca=function(a,b){b.Eb.push(a)};function Va(){L.call(this);this.ra="if";this.Ub=["isset","notset","eq","ne"];this.Db=["class"]}q(Va,L);Va.prototype.G=function(){return new Na};Va.prototype.ca=function(a,b){L.prototype.ca.call(this,a,b);for(var c=0,e=this.Ub.length,f=h,j=h;c<e;){f=this.Ub[c];j=a.getAttribute("tuna:"+f);if(j!==h){b.vc=f;b.uc=j;break}c++}c=0;e=this.Db.length;for(j=f=h;c<e;){f=this.Db[c];j=a.getAttribute("tuna:"+f);if(j!==h){b.jc=f;b.ic=j;break}c++}};Va.prototype.Ca=function(a,b){b.Hb.push(a)};function Wa(){L.call(this);this.ra="checkbox"}q(Wa,L);Wa.prototype.G=function(){return new Oa};Wa.prototype.Ca=function(a,b){b.Gb.push(a)};function Ta(a,b){var c=h;if(a.pb[b]!==d)c=a.pb[b];else{var e=a.xa.getElementById(b);if(e!==h){a.pb[b]=c=new Qa;for(var f=0,j=a.W.length;f<j;)a.W[f].nc(e,c),f++}}return c};function Xa(){}Xa.prototype.append=l();function Za(a){this.f=a}p(Za,Xa);Za.prototype.append=function(a){this.f.appendChild(a)};function $a(a){this.$=a}$a.prototype.n=l();$a.prototype.ta=l();function M(a){this.$=a;this.Z=new Ja;this.d=[];this.sb=h}q(M,$a);M.prototype.ha=function(a){this.Z.ha(a)};M.prototype.ta=function(a){a=this.Z.evaluate(a);a!==h&&(a=a.Fa(),this.sb!==h&&(a=this.sb.join(a)),this.Pa(a))};M.prototype.Pa=function(a){a===h&&(a="");for(var a=a.toString(),b=this.d.length-1;0<=b;)this.d[b].innerHTML!==a&&(this.d[b].innerHTML=a),b--};
M.prototype.n=function(a){if(a)for(a=h;0<this.d.length;){if(a=this.d.shift(),a.parentNode!==h){a.parentNode.removeChild(a);var b=this.$;b.ma=b.ma.concat(a)}}else this.d.length=0;this.Z=h};function ab(a){M.call(this,a);this.Lb=this.V="";this.Mb=i}q(ab,M);ab.prototype.Pa=function(a){a!==h?bb(this,a):cb(this);if(this.Mb){var b=this;setTimeout(function(){for(var c=b.d.length-1;0<=c;){var e=b.d[c],f=b.Lb,j=""+a,k=e.ownerDocument,n=h;k.createEventObject!==d?(n=k.createEventObject(),j&&(n.data=j),j="on"+f,e[j]===d?(n.qb=f,e.fireEvent("onhelp",n)):e.fireEvent(j,n)):(n=document.createEvent("UIEvents"),n.initUIEvent(f,g,g,window,1),j&&(n.data=j),e.dispatchEvent(n));c--}},0)}};
function bb(a,b){for(var c=a.d.length-1;0<=c;)a.d[c][a.V]!==d?a.d[c][a.V]=b:a.d[c].setAttribute(a.V,b+""),c--}function cb(a){for(var b=a.d.length-1;0<=b;)a.d[b][a.V]!==d?a.d[b][a.V]=h:a.d[b].removeAttribute(a.V),b--};function db(a){M.call(this,a);this.Tb=this.Cb=h}q(db,M);db.prototype.Pa=function(a){for(var b=this.Tb.test(a),c=this.d.length-1;0<=c;)this.Cb.apply(this.d[c],b,a),c--};function eb(a){M.call(this,a)}q(eb,M);eb.prototype.Pa=function(a){if(a!==h){var b=this.d.length-1;if(a===g||a===i)for(;0<=b;)this.d[b].checked=a,b--;else if(a instanceof Array)for(;0<=b;)this.d[b].checked=-1!==u(this.d[b].value,a),b--;else for(a+="";0<=b;)this.d[b].checked=this.d[b].value===a,b--}};function fb(a){this.$=a;this.hb=this.gb=this.ya=h;this.C={};this.Z=new Ja;this.jb=new Ja;this.kb=h}q(fb,$a);fb.prototype.ha=function(a){this.Z.ha(a)};fb.prototype.sa=function(a,b){this.C[b]=a};fb.prototype.ta=function(a){a=this.Z.evaluate(a);if(a!==h){var b=a.Fa(),c=this.C;this.C={};for(var e in b){var f=Ha(a,e),j=c,k=this.jb.evaluate(f);k!==h&&(k=k.Fa(),k!==h&&(j[k]===d?this.sa(gb(this),k):(this.C[k]=j[k],delete j[k]),this.C[k].ta(f)))}hb(c)}else hb(this.C)};
function hb(a){for(var b in a)a[b].n(g),delete a[b]}function gb(a){var b=a.gb.cloneNode(g),c=a.$,e=ib(a.ya,a.hb,b,c);a.kb.append(b);c.Ja=c.Ja.concat(b);return e}fb.prototype.n=function(a){for(var b in this.C)this.C[b].n(a),this.C[b]=h;this.C=this.kb=this.jb=this.Z=this.hb=this.gb=this.ya=h};function jb(a){this.$=a||this;this.h=[];this.Ja=[];this.ma=[];this.ob=h}q(jb,$a);jb.prototype.Ab=m("ob");jb.prototype.ta=function(a){for(var b=this.h.length-1;0<=b;)this.h[b].ta(a),b--};jb.prototype.n=function(a){for(var b=this.h.length-1;0<=b;)this.h[b].n(a),b--;a&&this.ob.parentNode.removeChild(this.ob)};function kb(){}kb.prototype.compile=l();function ib(a,b,c,e){e=new jb(e);e.Ab(c);for(var f=0,j=a.X.length;f<j;)a.X[f].compile(c,b,e),f++;return e};function N(){}p(N,kb);N.prototype.compile=function(a,b,c){for(var e=c.$,f=h,b=this.Qa(b),j=b.length-1;0<=j;)f=this.G(e),this.za(a,b[j],f),c.h=c.h.concat(f),j--};N.prototype.Qa=function(a){return a.Yb};N.prototype.G=function(a){return new M(a)};N.prototype.za=function(a,b,c){c.ha(b.vb);b.filter!==h&&(c.sb=b.filter.split("$$"));b=b.Bb;A(a,b)||(a=ha("."+b,a));c.d=c.d.concat(a)};function lb(){}q(lb,N);lb.prototype.Qa=function(a){return a.Eb};lb.prototype.G=function(a){return new ab(a)};lb.prototype.za=function(a,b,c){N.prototype.za.call(this,a,b,c);a=b.kc;c.V=a;c.Lb=a+"-change";c.Mb=b.pc};function mb(){}q(mb,N);mb.prototype.Qa=function(a){return a.Hb};mb.prototype.G=function(a){return new db(a)};mb.prototype.za=function(a,b,c){N.prototype.za.call(this,a,b,c);a:{switch(b.jc){case "class":a=new nb(b.ic);break a}a=h}c.Cb=a;c.Tb=ob(b.vc,b.uc)};function ob(a,b){switch(a){case "isset":return new pb;case "notset":return new qb;case "eq":return new rb(b);case "ne":return new sb(b)}return h}function tb(a){this.e=a||""}tb.prototype.test=l();function pb(){this.e=""}q(pb,tb);
pb.prototype.test=function(a){return a!=h};function qb(){this.e=""}q(qb,tb);qb.prototype.test=function(a){return a==h};function rb(a){this.e=a||""}q(rb,tb);rb.prototype.test=function(a){return a===this.e||a+""===this.e};function sb(a){this.e=a||""}q(sb,tb);sb.prototype.test=function(a){return!(a==this.e||a+""==this.e)};function ub(a){this.e=a||""}ub.prototype.apply=l();function nb(a){this.e=a||"";this.K=h}q(nb,ub);
nb.prototype.apply=function(a,b,c){var e=this.e;""!==e?b?B(a,e):C(a,e):this.K!==c&&b&&(this.K!==h&&C(a,this.K+""),B(a,c+""),this.K=c)};function vb(a){this.e=a||"";this.K=h}q(vb,ub);vb.prototype.apply=function(a,b,c){var e=this.e;""!==e?b?B(a,e):C(a,e):this.K!==c&&b&&(this.K!==h&&C(a,this.K+""),B(a,c+""),this.K=c)};function wb(){}q(wb,N);wb.prototype.Qa=function(a){return a.Gb};wb.prototype.G=function(a){return new eb(a)};function xb(a,b){this.xa=a;this.ya=b}p(xb,kb);xb.prototype.compile=function(a,b,c){for(var b=b.Pb,e=b.length-1;0<=e;){var f=a,j=b[e],k=c,n=k.$,r=[],t=j.Bb;if(A(f,t))r.push(yb(this,f,j,n));else for(var I=ha("."+t,f),E=I.length-1;0<=E;)la(I[E],t,f)===h&&r.push(yb(this,I[E],j,n)),E--;k.h=k.h.concat(r);e--}};
function yb(a,b,c,e){e=new fb(e);e.ya=a.ya;var f=c.sc,a=a.xa.getElementById(f);a!==h?(a=a.cloneNode(g),a.removeAttribute("id"),e.gb=a):alert("Cannot find item renderer with id: "+f);e.hb=c.tc;e.jb.ha(c.keyPath);e.ha(c.vb);b=new Za(b);e.kb=b;return e};var zb=new function(){this.xa=document;this.pb={};this.W=[];this.W.push(new L);this.W.push(new Wa);this.W.push(new Ua);this.W.push(new Va);this.W.push(new Sa(this))},Ab={},Bb=new function(){this.xa=document;this.X=[];this.X.push(new N);this.X.push(new wb);this.X.push(new lb);this.X.push(new mb);this.X.push(new xb(this.xa,this))};function O(a){this.j=a}O.prototype.init=function(a,b){var c=[],e;e=ha(this.j,a);e=e.concat(v!==h&&v.filter!==d?v.filter(this.j,[a]):h);for(var f=0,j=e.length,k=h;f<j;){for(var k=e[f],n=a,r=g,t=Cb,I=0,E=t.length;I<E&&!(k!==n&&(r=r&&!A(k,t[I])&&la(k,t[I],n)===h,!r));)I++;r&&(k=this.k(e[f],b),k!==h&&(c.push(k),Db(k,"not-init")||k.init()));f++}return c};O.prototype.n=function(a){for(var b=0,a=a.length;b<a;)b++};O.prototype.k=l();function P(a){D.call(this);this.a=a;this.A={}}q(P,D);P.prototype.getName=function(){return this.a.getAttribute("data-name")};P.prototype.isEnabled=function(){return!A(this.a,"disabled")};function Q(a,b,c){c===h?delete a.A[b]:a.A[b]=c}function Eb(a,b,c){c?a.a.setAttribute("data-"+b,c):a.a.removeAttribute("data-"+b)}function Fb(a){var b=a.a.getAttribute("data-popup-id");b===h&&a.A["popup-id"]!==d&&(b=a.A["popup-id"]);return b}
function R(a,b){var c=a.a.getAttribute("data-"+b);c===h&&a.A[b]!==d&&(c=a.A[b]);return c}function Gb(a,b){var c=a.a.getAttribute("data-"+b);c===h&&a.A[b]!==d&&(c=a.A[b]);return Number(c)}function Db(a,b){var c=a.a.getAttribute("data-"+b);c===h&&a.A[b]!==d&&(c=a.A[b]);return!!c}P.prototype.init=l();P.prototype.n=l();function Hb(a){P.call(this,a);this.mb=[];this.J={}}q(Hb,P);Hb.prototype.clear=function(){this.a.innerHTML=""};function Ib(a,b){for(var b=b||a.a,c=0,e=a.mb.length,f=h,j=h;c<e;)f=a.mb[c],j=S[f]!==d?S[f]:h,j!==h?(a.J[f]===d&&(a.J[f]=[]),a.J[f]=a.J[f].concat(j.init(b,a))):alert('Unknown module "'+f+'"'),c++}function T(a,b,c){if(a.J[b]!==d)for(var a=a.J[b],b=0,e=a.length;b<e;){if(a[b].getName()===c)return a[b];b++}return h};var S={},Cb=[];function Jb(a){P.call(this,a);this.Ac=i}q(Jb,P);Jb.prototype.init=function(){if(!this.Ac){var a=this;x(this.a,".j-popup-close","click",function(b){z(b);a.close()});x(this.a,".j-popup-apply","click",function(b){z(b);a.apply()})}};Jb.prototype.open=function(){this.b("popup-open")&&B(this.a,"show")};Jb.prototype.close=function(){this.b("popup-close")&&C(this.a,"show")};Jb.prototype.apply=function(){this.b("popup-apply",Kb(this))&&C(this.a,"show")};
function Kb(a){a=w("form.j-popup-form",a.a);return a!==h?Lb(a):h};var Mb={},Nb=0;function Ob(a){""===a.id&&(a.id="popup_"+Nb++);if(Mb[a.id]===d){var b=new Jb(a);b.init();Mb[a.id]=b}return Mb[a.id]}var U=h,Pb=h;function Qb(){var a=w("#alert_popup");a!==h?(U=Ob(a),U.init(),Pb=w(".j-message",a)):U!==h&&(U.n(),Pb=U=h)}function Rb(a){U!==h&&Pb!==h&&(Pb.innerHTML=a,U.open())}var V=h,Sb=h;function Tb(){var a=w("#confirm_popup");a!==h?(V=Ob(a),V.init(),Sb=w(".j-message",a)):V!==h&&(V.n(),Sb=V=h)}
function Ub(a){function b(c){a("popup-apply"===c.hc);V.removeEventListener("popup-apply",b);V.removeEventListener("popup-close",b)}Sb.innerHTML="\u041f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0444\u043e\u0440\u043c\u044b \u0442\u043e\u0440\u0442\u0430, \u0432\u0441\u0435 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0442\u0435\u0440\u044f\u043d\u043e!";V.addEventListener("popup-apply",b);V.addEventListener("popup-close",
b);V.open()};function Vb(a){P.call(this,a);this.cc=i}q(Vb,P);Vb.prototype.init=function(){if(!this.cc){this.cc=g;var a=this;y(this.a,"click",function(b){a.isEnabled()?a.b("click"):ka(b)})}};Vb.prototype.setActive=function(a){var b=this.a;!a&&A(b,"active")?C(b,"active"):a&&!A(b,"active")&&B(b,"active")};function Wb(a){Vb.call(this,a);this.Sa=h}q(Wb,Vb);Wb.prototype.init=function(){var a=Fb(this);a!==h&&(a=w("#"+a),a!==h&&(this.Sa=Ob(a)));var b=this;y(this.a,"click",function(a){b.isEnabled()?b.b("click")&&b.Sa!==h&&b.Sa.open():ka(a)})};function Xb(a){return a.Sa};function Yb(a){P.call(this,a);this.Jb=h;this.Bc=g;Q(this,"button-selector",".j-button")}q(Yb,P);Yb.prototype.init=function(){var a=this,b=R(this,"button-selector");b!==h&&x(this.a,b,"click",function(b){a.Bc&&z(b);var e=Zb(this),f=R(e,"action");f===h&&(f=a.Jb);f!==h&&(a.b(f,e)||ka(b))})};var $b={},ac=0;function Zb(a){""===a.id&&(a.id="button_"+ac++);if($b[a.id]===d){var b=new Vb(a);b.init();$b[a.id]=b}return $b[a.id]};function bc(a){P.call(this,a);this.q=this.ka=h;Q(this,"wmode","opaque");Q(this,"menu",i);Q(this,"allow-fullscreen",i);Q(this,"allow-script-access","always")}q(bc,P);bc.prototype.init=function(){this.ka="swf_"+cc++;this.a.innerHTML='<div id="'+this.ka+'"></div>';swfobject.embedSWF(R(this,"src"),this.ka,Gb(this,"width"),Gb(this,"height"),"10.0.0",h,R(this,"flashvars"),{wmode:R(this,"wmode"),allowfullscreen:R(this,"allow-fullscreen"),allowscriptaccess:R(this,"allow-script-access"),menu:R(this,"menu")})};
bc.prototype.n=function(){this.a.innerHTML="";this.q=this.ka=h};bc.prototype.reset=function(){this.n();this.init()};var cc=0;function dc(a){P.call(this,a);this.P=h;this.ja={};this.Fb="form_callback"+(Math.random()+"").substr(2);this.nb=h}q(dc,P);o=dc.prototype;
o.init=function(){function a(a){c.isEnabled()?(b.setAttribute("value",c.Fb),ec(c,a.type,a)):z(a)}this.nb=R(this,"record-type");this.P=w(".j-form-message",this.a);var b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("name","__callback");this.a.appendChild(b);var c=this;y(this.a,"submit",a);y(this.a,"reset",a);window[this.Fb]=function(a){var a=ca(a),b=a.response,a=a.errors;if(b!==d)c.nb!==h&&(b=Da(b,c.nb)),c.b("result",b);else if(a!==d){for(var b=0,j=a.length,k=h;b<j;){k=
a[b];if(k.param!==d){var n=c,r=k.message,t;t=n;var k=k.param,I=h;if(t.ja[k]===d){var E=w(".j-"+k+"-input",t.a);E!==h&&(E=new fc(E),E.init(),t.ja[k]=E)}t.ja[k]!==d&&(I=t.ja[k]);t=I;t!==h?(n=t,B(n.a,"error"),n.Y!==h&&(n.Y.innerHTML=r)):gc(n,r)}else gc(c,k.message);b++}c.b("error",a)}}};
o.Fa=function(a){var b=h,c=this.a.elements[a];if(c!==d)if(a=i,c instanceof NodeList)for(var c=Array.prototype.slice.call(c),e=0,f=c.length,b=[];e<f;)a="checkbox"===c[e].type||"radio"===c[e].type,(!a||a&&c[e].checked)&&b.push(c[e].value),e++;else if(a="checkbox"===c.type||"radio"===c.type,!a||a&&c.checked)b=c.value;return b};
function hc(a){a=a.a.elements.client_network;if(a!==d)if(a instanceof NodeList)for(var b=Array.prototype.slice.call(a),c=0,e=b.length,f="",j=[],f="2",j=[f],k=-1;c<e;)"radio"===b[c].type?b[c].checked=b[c].value===f:"checkbox"===b[c].type?(k=u(b[c].value,j),b[c].checked=-1!==k,-1!==k&&j.splice(k,1)):a.value=f,c++;else"checkbox"===a.type||"radio"===a.type?a.checked=2===a.value:a.value=2}o.submit=function(){ec(this,"submit");this.a.submit()};o.reset=function(){ec(this,"reset");this.a.reset()};o.o=function(){return Lb(this.a)};
function ec(a,b,c){if(a.b(b)){a.P!==h&&(a.P.innerHTML="",B(a.P,"hide"));for(var e in a.ja)b=a.ja[e],C(b.a,"error"),b.Y!==h&&(b.Y.innerHTML=b.Kb)}else c!==d&&z(c)}function gc(a,b){a.P!==h&&(a.P.innerHTML+=b+"<br />",C(a.P,"hide"))};function ic(a){P.call(this,a);this.Y=h;this.Kb=""}q(ic,P);ic.prototype.init=function(){this.Y=w(".j-message",this.a);this.Y!==h&&(this.Kb=this.Y.innerHTML)};var fc=ic;function W(a){P.call(this,a);this.Q=this.Aa=this.e=h;this.Ra=function(a){return a.name!==d?""+a.name:""};this.gc=new jc(a)}q(W,P);o=W.prototype;o.init=function(){this.Q=w("input.j-filtration",this.a);if(this.Q!==h){var a=this,b=h;y(this.Q,"keyup",function(){this.value!==b&&(a.filter(this.value),b=this.value)})}this.gc.init()};function kc(a,b){a.Ra=b}o.setData=function(a){this.Aa=this.e=a;this.update()};o.filter=function(a){this.Aa=lc(this,a);this.update()};o.update=function(){this.gc.ua(this.Aa)};
o.clear=function(){this.Q.value="";this.filter("")};function lc(a,b){var c=[];if(!b||0===b.length)c=a.e;else for(var e=b.toUpperCase(),f=0,j=a.e.length,k=h;f<j;)k=a.Ra(a.e[f]),-1!==k.toUpperCase().indexOf(e)&&c.push(a.e[f]),f++;return c};function mc(a){W.call(this,a);this.aa=h;this.Na=new nc(a,h)}q(mc,W);
mc.prototype.init=function(){W.prototype.init.call(this);var a=w(".j-autocomplete-body",this.a),b=this,c=i;y(this.Q,"focus",function(){c||(ja(document.body,"click",function(){var e=b.Q.value;b.aa=h;var f=lc(b,e).shift();f!==d&&b.Ra(f)===e&&oc(b,f);b.aa===h&&b.clear();B(a,"hide");c=i}),b.filter(""),C(a,"hide"),c=g)});x(this.a,".j-autocomplete-item","click",function(a){var c=b.Na.ea(this);c!==h?b.r(c):ka(a)});y(this.Q,"click",function(a){ka(a)});Eb(this.Na,"item-selector",".j-autocomplete-item");this.Na.init()};
mc.prototype.r=function(a){0<this.Aa.length&&oc(this,this.Aa[a])};function oc(a,b){a.aa!==b&&(a.aa=b,a.Q.value=a.Ra(b),a.b("change"))}mc.prototype.I=function(){this.aa!==h&&(this.aa=h,this.b("change"))};mc.prototype.update=function(){W.prototype.update.call(this);this.Na.yc();this.I()};function Lb(a){for(var b={},a=a.elements,c=0,e=a.length,f=h;c<e;)f=a[c].name,b[f]!==d?(b[f]instanceof Array||(b[f]=[b[f]]),b[f].push(a[c].value)):b[f]=a[c].value,c++;return b};function pc(){}pc.prototype.oc=l();function qc(){}qc.prototype.ua=l();function rc(a){P.call(this,a);this.oa=this.F=h}q(rc,P);p(rc,qc);rc.prototype.init=function(){var a=R(this,"template-id"),b;a!==h?(Ab[a]===d&&(Ab[a]=Ta(zb,a)),b=Ab[a]):b=h;b!==h?this.F=ib(Bb,b,this.a,h):alert("Unknown template "+a)};rc.prototype.ua=function(a){this.F.ta(new Ga(a));this.oa!==h&&this.oa.oc(this.a,this.F.Ja.splice(0,this.F.Ja.length),this.F.ma.splice(0,this.F.ma.length))};rc.prototype.n=function(){this.F.n();this.oa!==h&&this.F.ma.splice(0,this.F.ma.length);this.oa=this.F=h};
rc.prototype.reset=function(){var a=this.oa;this.n();this.init();this.oa=a};var jc=rc;function sc(){}o=sc.prototype;o.T=l();o.r=l();o.I=l();o.fa=l();o.ea=l();o.v=l();o.yc=l();function tc(a){P.call(this,a);this.m=this.i=this.l=h}p(tc,sc);q(tc,P);o=tc.prototype;o.fa=function(){return this.m.fa()};o.yc=function(){this.i.update()};o.ea=function(a){return this.l.ea(a)};o.v=function(a){return this.l.v(a)};o.T=function(){return this.m.T()};function uc(a){a=a.m.T();return 0<a.length?a.pop():h}o.r=function(a){return this.m.r(a)};o.I=function(){this.m.I()};function vc(a,b){tc.call(this,a);Q(this,"item-selector",".j-selection-item");Q(this,"index-attribute",b);Q(this,"is-multiple",h);Q(this,"selection-class","active");Q(this,"selection-event","click")}q(vc,tc);
vc.prototype.init=function(){var a=R(this,"index-attribute");this.l=a===h?new wc:new xc(a);this.i=new yc(this.a);this.m=Db(this,"is-multiple")?new Ac:new Bc;this.i.Da=R(this,"selection-class");this.i.Ba=R(this,"item-selector");this.i.m=this.m;this.i.Ha(this.l);this.m.H=this;this.m.Ha(this.l);this.m.i=this.i;this.i.update()};var nc=vc;function Cc(a){P.call(this,a);this.s=h;this.Ka={};this.D=h;this.w={};this.fb=[];this.O=h;Q(this,"selection-class","active");Q(this,"item-selector",".j-navigation-page");Q(this,"menu-selector",".j-navigation-menu")}q(Cc,P);
Cc.prototype.init=function(){this.s=new Dc;var a=new xc("data-name"),b=new yc(this.a),c=R(this,"selection-class");b.Da=c;c=R(this,"item-selector");b.Ba=c;b.m=this.s;b.Ha(a);this.s.H=this;this.s.i=b;this.s.Ha(a);this.s.zb(this);b.update();Ec(this);b=R(this,"menu-selector");a=R(this,"button-selector");if(b!==h&&a!==h&&(b=w(b,this.a),b!==h))for(var a=ha(a,b),b=0,c=a.length,e=h,f=e=h;b<c;)f=Zb(a[b]),e=R(f,"href"),e!==h&&(e=e.split("/").shift(),this.Ka[e]===d&&(this.Ka[e]=[]),this.Ka[e].push(f)),b++;a=
this.s.c;a!==h&&Fc(this,a,g)};function Ec(a){var b=new Yb(a.a);Eb(b,"button-selector",".j-navigation-link");b.Jb="navigate";b.addEventListener("navigate",function(b,e){b.preventDefault();var f=R(e,"href");if(f!==h){var j;j===d&&(j="data-");for(var k={},n=e.a.attributes,r=0,t=n.length;r<t;)0===n[r].name.indexOf(j)&&(k[n[r].name.substr(j.length)]=n[r].value),r++;delete k.href;a.navigate(f,k)}});b.addEventListener("back",function(b){b.preventDefault();a.back()});b.init()}
function Fc(a,b,c){if(b!==h&&(a=a.Ka[b],a!==d))for(var b=0,e=a.length;b<e;)a[b].setActive(c),b++}function Gc(a){var b=[],c=a.s.c;c!==h&&(b.push(c),a.w[c]!==d&&(b=b.concat(Gc(a.w[c]))));return b}function Hc(a){var b=[];a.D!==h&&(b.push(a.getName()),b=Hc(a.D).concat(b));return b}Cc.prototype.wa=function(){return this.D===h?this:this.D.wa()};Cc.prototype.back=function(){this.D===h?0<this.fb.length&&(this.O=this.fb.pop(),Ic(this,this.O.Xb.slice(0),this.O.getData()),window.history.back()):this.wa().back()};
Cc.prototype.navigate=function(a,b){if(a instanceof Array)this.D===h?(this.O===h&&(this.O=new Jc(Gc(this))),Ic(this,a,b),this.fb.push(this.O),this.O=new Jc(Gc(this),b),window.history.pushState(h,"",this.O.o())):Ic(this,a,b);else{var c=a.split("/");0!==a.indexOf("/")&&(c=Hc(this).concat(c));this.wa().navigate(c,b)}};function Ic(a,b,c){for(var e=b.shift();""===e&&0<b.length;)e=b.shift();Fc(a,a.s.c,i);a.s.navigate(e,c||h);Fc(a,a.s.c,g);if(a.w[e]!==d)return Ic(a.w[e],b,c)}
function Jc(a,b){this.Xb=a;this.z=b||h}Jc.prototype.o=function(){var a="";this.z!==h&&(a=qa(this.z).join("&"));""!==a&&(a="?"+a);return"/"+this.Xb.join("/")+a};Jc.prototype.getData=aa("z");function Kc(a){nc.call(this,a,h);this.L=-1;Q(this,"item-selector",".j-carousel-item");Q(this,"next-button-selector",".j-carousel-next");Q(this,"back-button-selector",".j-carousel-back")}q(Kc,nc);Kc.prototype.init=function(){nc.prototype.init.call(this);var a=this;this.L=Number(uc(this));var b=R(this,"next-button-selector");b!==h&&x(this.a,b,"click",function(b){z(b);a.next()});b=R(this,"back-button-selector");b!==h&&x(this.a,b,"click",function(b){z(b);a.back()})};
Kc.prototype.next=function(){this.L++;this.v(this.L)===h&&(this.L=0);this.r(this.L)};Kc.prototype.back=function(){this.L--;this.v(this.L)===h&&(this.L=this.l.wb()-1);this.r(this.L)};function Lc(){}o=Lc.prototype;o.sa=l();o.ea=l();o.v=l();o.clear=l();o.wb=l();function Mc(){this.h=[]}p(Mc,Lc);o=Mc.prototype;o.sa=function(a){return this.h.push(a)-1};o.ea=function(a){return u(a,this.h)};o.v=function(a){return this.h[a]||h};o.clear=function(){this.h.length=0};o.wb=function(){return this.h.length};var wc=Mc;function Nc(a){this.Nb=a;this.h={}}p(Nc,Lc);o=Nc.prototype;o.sa=function(a){var b=a.getAttribute(this.Nb);b!==h&&(this.h[b]=a);return b};o.ea=function(a){a=a.getAttribute(this.Nb);return a!==h&&this.h[a]!==d?a:h};o.v=function(a){return this.h[a]||h};o.clear=function(){this.h={}};o.wb=function(){var a=0,b;for(b in this.h)a++;return a};var xc=Nc;function Oc(){}Oc.prototype.T=l();Oc.prototype.r=l();Oc.prototype.I=l();Oc.prototype.fa=l();function X(){this.H=this.i=this.l=h;this.Ec=[]}p(X,Oc);o=X.prototype;o.Ha=m("l");o.T=l();o.r=l();o.I=l();o.fa=function(a){return this.l.v(a)!==h&&-1===u(a,this.Ec)};function Pc(){X.call(this);this.c=h}q(Pc,X);Pc.prototype.T=function(){return this.c!==h?[this.c]:[]};Pc.prototype.r=function(a){var b;if(b=this.fa(a))if(b=this.c!==a)b=this.c,b=(b===h||this.H.b("deselect",b))&&this.H.b("select",a);return b?(b=this.c,this.c!==h&&this.i.S(this.c),this.i.Ea(a),this.c=a,b!==h&&this.H.b("deselected",b),this.H.b("selected",a),g):i};Pc.prototype.I=function(){this.c!==h&&(this.i.S(this.c),this.c=h)};var Bc=Pc;function Qc(){X.call(this);this.na=[]}q(Qc,X);Qc.prototype.T=function(){return this.na.slice(0)};Qc.prototype.r=function(a){if(this.fa(a)){var b=u(a,this.na);if(-1===b){if(this.H.b("select",a))return this.i.Ea(a),this.na.push(a),g}else if(this.H.b("deselect",a))return this.i.S(a),this.na.splice(b,1),g}return i};Qc.prototype.I=function(){for(;0<this.na.length;)this.i.S(this.na.shift())};var Ac=Qc;function Rc(){X.call(this);this.Sb=this.Rb=this.p=this.c=h}q(Rc,X);o=Rc.prototype;o.zb=m("Rb");o.T=function(){return this.c!==h?[this.c]:[]};o.navigate=function(a,b){this.Sb=b;return this.r(a)};
o.r=function(a){return this.fa(a)&&this.c!==a?(this.c!==h&&(this.p instanceof Y&&this.p.ub(a)&&this.p instanceof Y&&this.p.close(),this.i.S(this.c),this.H.b("close",this.c)),this.c=a,this.p=h,this.c!==h&&(a=this.l.v(this.c),a!==h&&(this.p=Sc[a.id]!==d?Sc[a.id]:h,this.p!==h&&!this.p.$b&&(this.p instanceof Y&&this.p.zb(this.Rb),Tc(this.p,a)))),this.i.Ea(this.c),this.H.b("open",this.c),this.p!==h&&this.p instanceof Y&&this.p.open(this.Sb),g):i};o.I=function(){this.c!==h&&(this.i.S(this.c),this.c=h)};
var Dc=Rc;function Uc(){}Uc.prototype.Ea=l();Uc.prototype.S=l();Uc.prototype.update=l();function Vc(){this.m=this.l=h}p(Vc,Uc);Vc.prototype.Ha=m("l");Vc.prototype.Ea=l();Vc.prototype.S=l();Vc.prototype.update=l();function Wc(a){Vc.call(this);this.a=a;this.Da=this.Ba=""}q(Wc,Vc);Wc.prototype.Ea=function(a){a=this.l.v(a);a!==h&&B(a,this.Da)};Wc.prototype.S=function(a){a=this.l.v(a);a!==h&&C(a,this.Da)};Wc.prototype.update=function(){if(this.Ba!==h){this.m.I();this.l.clear();for(var a=ha(this.Ba,this.a),b=0,c=a.length,e=h,f=h;b<c;)f=a[b],ia(f,this.Ba,this.a)===h&&(e=this.l.sa(f),e!==h&&A(f,this.Da)&&this.m.r(e)),b++}};var yc=Wc;function Xc(){this.j="form.j-form"}q(Xc,O);Xc.prototype.k=function(a){return new dc(a)};var Yc=new Xc;S.form=Yc;function Zc(){this.j=".j-navigation"}q(Zc,O);Zc.prototype.k=function(a){return new Cc(a)};var $c=new Zc;S.navigation=$c;function ad(){this.j=".j-popup"}q(ad,O);ad.prototype.k=function(a){return Ob(a)};var bd=new ad;S.popup=bd;function cd(){this.j=".j-button"}q(cd,O);cd.prototype.k=function(a){return Zb(a)};var dd=new cd;S.button=dd;function ed(){this.j=".j-popup-button"}q(ed,O);ed.prototype.k=function(a){return new Wb(a)};var fd=new ed;S["popup-button"]=fd;function gd(){this.j=".j-selection-group"}q(gd,O);gd.prototype.k=function(a){var b=new nc(a,h),c=R(b,"selection-event"),e=R(b,"item-selector");c!==h&&e!==h&&x(a,e,c,function(){var a=b.ea(this);a!==h&&b.r(a)});return b};var hd=new gd;S["selection-group"]=hd;function id(){this.j=".j-template-transformer"}q(id,O);id.prototype.k=function(a){return new jc(a)};var jd=new id;S["template-transformer"]=jd;function kd(){this.j=".j-button-group"}q(kd,O);kd.prototype.k=function(a){return new Yb(a)};var ld=new kd;S["button-group"]=ld;function md(){this.j=".j-swf"}q(md,O);md.prototype.k=function(a){return new bc(a)};var nd=new md;S.swf=nd;function od(){this.j=".j-input-filter"}q(od,O);od.prototype.k=function(a){return new W(a)};var pd=new od;S["input-filter"]=pd;function qd(){this.j=".j-autocomplete"}q(qd,O);qd.prototype.k=function(a){return new mc(a)};var rd=new qd;S.autocomplete=rd;function sd(){this.j=".j-carousel"}q(sd,O);sd.prototype.k=function(a){return new Kc(a)};var td=new sd;S.carousel=td;var Sc={},ud=h;function vd(){this.f=h;this.$b=i;this.R=[]}p(vd,pc);function Tc(a,b){a.f=new Hb(b);for(var c=0,e=a.R.length;c<e;)a.f.mb.push(a.R[c]),c++;Ib(a.f);a.pa();a.$b=g}vd.prototype.pa=l();vd.prototype.oc=function(a,b){for(var c=0,e=b.length;c<e;)Ib(this.f,b[c]),c++};function wd(){vd.call(this);this.tb=h}q(wd,vd);wd.prototype.zb=m("tb");wd.prototype.ub=function(){return g};wd.prototype.close=l();wd.prototype.open=l();var Y=wd;window.main=function(a){fa.init(ra());v=$.find;-1===u("j-module-container",Cb)&&Cb.push("j-module-container");Tb();Qb();Tc(ud,a);FAPI.init(fa.get("api_server"),fa.get("apiconnection"),function(){FAPI.Client.initialize()});a=fa.get("custom_args");a!==h&&-1!==a.indexOf("ok_cake_url=")&&(a=a.split("ok_cake_url=").pop().split("&").shift(),Rb('<img src="http://files.fotonatorte.ru/ok-image/'+a+'" alt="\u041c\u043e\u0439 \u0442\u043e\u0440\u0442\u0438\u043a!" />'))};function xd(a){P.call(this,a);this.e=h;this.type="image/jpeg"}q(xd,P);xd.prototype.setData=function(a){this.e=a;yd(this)};xd.prototype.getData=aa("e");
function yd(a){if(ba){var b=document.createElement("form");b.method="POST";b.target="support_frame";b.action="/api/?method=utils.base64Echo&type="+a.type;var c=document.createElement("input");c.type="hidden";c.name="data";c.value=a.e;b.appendChild(c);document.body.appendChild(b);var e=w("#support_frame");ja(e,"load",function(){var c=w("img",e.contentWindow.document.body);if(c!==h){var j=a.a.parentNode;j!==h?(j.replaceChild(c,a.a),a.a.id!==h&&(c.id=a.a.id),a.a=c,a.b("loaded",a.a)):a.b("error")}else a.b("error");
document.body.removeChild(b)});b.submit()}else a.a.src="data:"+a.type+";base64,"+a.e,a.b("loaded",a.a)}var zd={};function Ad(a){return a.id!==h?(zd[a.id]===d&&(zd[a.id]=new xd(a)),zd[a.id]):new xd(a)};function Bd(){this.j="input.j-datepicker"}q(Bd,O);Bd.prototype.k=function(a){$(a).keydown(function(a){a.preventDefault()}).datepicker({minDate:new Date((new Date).getTime()+2592E5)});return h};var Cd=new Bd;S.datepicker=Cd;function Dd(){this.j="img.j-data-image"}q(Dd,O);Dd.prototype.k=function(a){return Ad(a)};var Ed=new Dd;S["data-image"]=Ed;function Fd(){this.j="img.j-data-image-copy"}q(Fd,O);Fd.prototype.k=function(a){var b=a.getAttribute("data-image-selector");if(b!==h){var c=a,a=w(b);if(a!==h){var e=Ad(a),a=function(){var a=e.a,b=c.parentNode;b!==h&&(a=a.cloneNode(i),a.id=c.id,a.className=c.className,b.replaceChild(a,c),c=a)};e.addEventListener("loaded",a);a();return e}}return h};var Gd=new Fd;S["data-image-copy"]=Gd;function Hd(){this.j=".j-yandex-share"}q(Hd,O);Hd.prototype.k=function(a){a.innerHTML='<div id="ya_share"></div>';a=document.createElement("script");a.type="text/javascript";a.src="http://yandex.st/share/share.js";a.onload=function(){(new window.Ya.share({element:"ya_share",elementStyle:{type:"none",quickServices:["facebook","lj","odnoklassniki","vkontakte","yaru"]}})).updateShareLink("http://api.yandex.ru","API")};document.body.appendChild(a);return h};var Id=new Hd;S["yandex-share"]=Id;function Jd(){this.j=".j-vk-share"}q(Jd,O);Jd.prototype.k=function(a){a.id="vk_groups";var b=document.createElement("script");b.type="text/javascript";b.src="http://userapi.com/js/api/openapi.js";b.onload=function(){window.VK.Widgets.Group(a.id,{mode:0,width:"200",height:"290"},32850256)};document.body.appendChild(b);return h};var Kd=new Jd;S["vk-share"]=Kd;function Ld(a){za.call(this,a);this.t=new pa;this.t.method="POST";this.t.Zb="/api/?method="+a;var b=this;this.t.addEventListener("complete",function(a,e){var f=h;try{f=JSON.parse(e)}catch(j){b.b("error",e)}if(f!==h){var k=f.response;k!==d?b.b("result",k):b.b("error",f.errors)}})}q(Ld,za);Ld.prototype.call=function(a){this.t.setData(a);this.t.send()};function Md(){}p(Md,Aa);Md.prototype.Va=function(a){return new Ld(a)};Ca.bb=new Md;function Nd(a){this.id="";this.ia=0;this.shape="";this.Za=this.$a=0;H.call(this,a)}q(Nd,H);Nd.prototype.ga=function(a){this.id=a.id;this.ia=a.weight;this.shape=a.shape;this.$a=a.ratio;this.Za=a.persons_count};Nd.prototype.o=function(){return{weight:this.ia,shape:this.shape,ratio:this.$a,personsCount:this.Za}};var Od=new Nd;xa.la.dimension=Od;function Pd(a){this.name=this.id="";H.call(this,a)}q(Pd,H);Pd.prototype.ga=function(a){this.id=a.id||h;this.name=a.name||h};Pd.prototype.o=function(){return{id:this.id,name:this.name}};var Qd=new Pd;xa.la.city=Qd;function Rd(a){this.name="";this.city=h;this.va=0;this.rc=i;H.call(this,a)}q(Rd,H);Rd.prototype.ga=function(a){this.id=a.id;this.name=a.name;this.city=new Pd(a.city);this.va=a.delivery_price};Rd.prototype.o=function(){return{id:this.id,city:this.city.o(),isNative:this.rc,deliveryPrice:this.va}};var Sd=new Rd;xa.la.bakery=Sd;function Td(){this.Ga=this.id="";this.Wa=this.lb=this.yb=this.wc=h}q(Td,H);Td.prototype.ga=function(a){this.id=a.id;this.Ga=a.image_url;this.wc=a.photo_url||h;this.yb=a.markup;this.lb=JSON.parse(a.markup);this.Wa=new Nd(a.dimension)};Td.prototype.o=function(){return{id:this.id,imageUrl:this.Ga,photoUrl:this.wc,dimension:this.Wa.o()}};var Ud=new Td;xa.la.cake=Ud;function Vd(){this.ab=this.Ta=this.da=h}q(Vd,H);Vd.prototype.o=function(){var a;a=0;if(this.da!==h){var b=this.da.lb.content.deco!==d?this.da.lb.content.deco:h;if(b!==h)for(var c=0,e=b.length;c<e;)a+=Wd(b[c].name),c++}b=this.ab!==h&&this.da!==h?Xd(this.ab,this.da.Wa.ia):0;c=this.Ta!==h?this.Ta.va:0;return{cake:J(this.da),recipe:J(this.ab),bakery:J(this.Ta),decorationPrice:a,recipePrice:b,deliveryPrice:c,totalPrice:a+b+c}};
function Wd(a){switch(a){case "cherry":case "grape":case "kiwi":case "raspberry":case "strawberry":case "orange":case "peach":case "lemon":case "blueberry":case "currant":return 10;case "pig1":case "car1":case "hare1":case "hedgehog1":case "moose1":case "owl1":case "pin1":case "sheep1":case "raven1":case "bear1":case "car2":case "car3":case "mat1":case "ia":case "ladybug":case "pig":case "rabbit":case "tiger":case "winnie":case "winnie1":case "bootes":return 250;case "doll1":case "doll2":return 350;
case "flower1":case "flower2":return 300;case "flower3":case "flower4":case "flower5":case "flower6":case "physalis":return 200;default:return 0}};function Yd(){this.va=this.xc=this.lc=0}q(Yd,H);Yd.prototype.o=function(){return{decoPrice:this.lc,recipePrice:this.xc,deliveryPrice:this.va,totalPrice:this.lc+this.xc+this.va}};function Zd(){this.Ga=this.mc=this.name=this.id="";this.Xa={}}q(Zd,H);Zd.prototype.ga=function(a){this.id=a.id;this.Ga=a.image_url;this.mc=a.desc;this.name=a.name;this.Xa=a.dimension_prices||h};Zd.prototype.o=function(a){var b={id:this.id,imageUrl:this.Ga,desc:this.mc,name:this.name};a!==d&&(b.price=Xd(this,a.Wa.ia));return b};function Xd(a,b){var c=b.toString().replace(".","_");return a.Xa!==h&&a.Xa[c]!==d?a.Xa[c].price:0}var $d=new Zd;xa.la.recipe=$d;function ae(){this.Jc=this.Mc=this.city=this.name=this.id=""}q(ae,H);ae.prototype.o=function(){return{id:this.id,name:this.name,network:this.Jc,userpicUrl:this.Mc}};var be=new F("users.getBakeries","bakery"),ce=new F,de=new F("cakes.getPromoted","cake"),wa=new F("dimensions.get","dimension"),ee=new F("recipes.get","recipe"),Z=new G,fe=new G,ge=new G,he=new G;function ie(){vd.call(this);this.R=["navigation","popup-button","template-transformer","autocomplete","yandex-share"]}q(ie,vd);
ie.prototype.pa=function(){var a=T(this.f,"autocomplete","city-popup");kc(a,function(a){return a.name});Xb(T(this.f,"popup-button","city-popup")).addEventListener("popup-apply",function(){var b=a.aa;b!==h&&je(b)});var b=T(this.f,"template-transformer","current-bakery");Z.addEventListener("update",function(a,e){b.ua(J(e))});ce.addEventListener("update",function(b,e){a.setData(e)});ta("cities.getCurrent",h,function(a){function b(){be.removeEventListener("update",b);var f=[];ce.set(be.map(function(b){b.rc=
b.city.name===a.name;var e=b.city.id;return-1===u(e,f)?(f.push(e),b.city):h}));je(a)}be.addEventListener("update",b);be.load()},"city")};function je(a){var b=be.find(function(b){return b.city.name===a.name});0===b.length&&(b=be.get());Z.set(b[0])}ud=new ie;function ke(){Y.call(this);this.R="template-transformer,carousel,vk-share,popup-button,button-group,selection-group".split(",")}q(ke,Y);ke.prototype.pa=function(){var a=T(this.f,"template-transformer","cake-list");de.addEventListener("update",function(b,c){a.ua(J(c))});de.load()};ke.prototype.ub=function(){return Z.get()!==h};var le=new ke;Sc.title_step=le;function me(){Y.call(this);this.B=s(this.B,this);this.Ia=this.q=this.N=this.cb=h;this.R=["data-image","swf"]}q(me,Y);
var ne=[{deco:[{url:"/img/deco/cherry.png",autorotate:g,name:"cherry",description:"\u0412\u0438\u0448\u043d\u044f"},{url:"/img/deco/grape.png",autorotate:g,name:"grape",description:"\u0412\u0438\u043d\u043e\u0433\u0440\u0430\u0434"},{url:"/img/deco/kiwi.png",autorotate:g,name:"kiwi",description:"\u041a\u0438\u0432\u0438"},{url:"/img/deco/raspberry.png",autorotate:g,name:"raspberry",description:"\u041c\u0430\u043b\u0438\u043d\u0430"},{url:"/img/deco/strawberry.png",autorotate:g,name:"strawberry",description:"\u041a\u043b\u0443\u0431\u043d\u0438\u043a\u0430"},
{url:"/img/deco/orange.png",autorotate:g,name:"orange",description:"\u0410\u043f\u0435\u043b\u044c\u0441\u0438\u043d"},{url:"/img/deco/blueberry.png",autorotate:g,name:"blueberry",description:"\u0427\u0435\u0440\u043d\u0438\u043a\u0430"},{url:"/img/deco/currant.png",autorotate:g,name:"currant",description:"\u0421\u043c\u043e\u0440\u043e\u0434\u0438\u043d\u0430"},{url:"/img/deco/peach.png",autorotate:g,name:"peach",description:"\u041f\u0435\u0440\u0441\u0438\u043a"},{url:"/img/deco/lemon.png",autorotate:g,
name:"lemon",description:"\u041b\u0438\u043c\u043e\u043d"},{url:"/img/deco/physalis.png",autorotate:i,name:"physalis",description:"\u0424\u0438\u0437\u0430\u043b\u0438\u0441"}]},{deco:[{url:"/img/deco/pig1.png",autorotate:i,name:"pig1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/car1.png",autorotate:i,name:"car1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},
{url:"/img/deco/hare1.png",autorotate:i,name:"hare1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/hedgehog1.png",autorotate:i,name:"hedgehog1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/moose1.png",autorotate:i,name:"moose1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/owl1.png",
autorotate:i,name:"owl1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/pin1.png",autorotate:i,name:"pin1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/sheep1.png",autorotate:i,name:"sheep1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/raven1.png",autorotate:i,name:"raven1",
description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/bear1.png",autorotate:i,name:"bear1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/car2.png",autorotate:i,name:"car2",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/car3.png",autorotate:i,name:"car3",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},
{url:"/img/deco/mat1.png",autorotate:i,name:"mat1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/ladybug.png",autorotate:i,name:"ladybug",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/tiger.png",autorotate:i,name:"tiger",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/winnie.png",
autorotate:i,name:"winnie",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/winnie1.png",autorotate:i,name:"winnie1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/rabbit.png",autorotate:i,name:"rabbit",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/ia.png",autorotate:i,name:"ia",
description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/doll1.png",autorotate:i,name:"doll1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/doll2.png",autorotate:i,name:"doll2",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/bootes.png",autorotate:i,name:"bootes",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"}]},
{deco:[{url:"/img/deco/flower1.png",autorotate:i,name:"flower1",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/flower2.png",autorotate:i,name:"flower2",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/flower3.png",autorotate:i,name:"flower3",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/flower4.png",
autorotate:i,name:"flower4",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/flower5.png",autorotate:i,name:"flower5",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"},{url:"/img/deco/flower6.png",autorotate:i,name:"flower6",description:"\u0421\u0430\u0445\u0430\u0440\u043d\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u043a\u0430"}]}];o=me.prototype;
o.pa=function(){var a=this;this.cb=T(this.f,"swf","cake-designer");wa.addEventListener("update",function(){a.cb.reset()})};o.open=function(a){Z.addEventListener("update",this.B);this.B();a=ua(de,a["cake-id"]);a!==h?this.q===h?this.Ia=a.yb:this.q.loadCakePreset(a.yb):this.Ia=h};o.close=function(){Z.removeEventListener("update",this.B)};o.B=function(){var a=Z.get();a!==h&&wa.load({bakery_id:a.id})};
function oe(a){var b=[],c=[],e=[];va(function(a){-1===u(a.ia,b)&&b.push(a.ia);-1===u(a.$a,c)&&c.push(a.$a);-1===u(a.Za,e)&&e.push(a.Za)});0<c.length&&a.q.initialize(JSON.stringify({weightsList:b,ratiosList:c,personsList:e,decoSelectors:ne}),"round",c[0])}o.Ic=function(a){var b=this,c=this.q.getCakeWeight();0<wa.find(function(b){return b.ia===c&&b.shape===a}).length?Ub(function(c){c&&b.q.changeShape(a)}):Rb("\u0414\u0430\u043d\u043d\u0430\u044f \u0444\u043e\u0440\u043c\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0434\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0432\u0435\u0441\u0430!")};
o.Kc=function(){this.Ia!==h&&this.q.loadCakePreset(this.Ia)};o.Lc=function(){var a=this.cb;a.ka!==h&&a.q===h&&(a.q=swfobject.getObjectById(a.ka));this.q=a.q;oe(this)};o.ub=function(a){if(this.q!==h){var b=this.q.getCakeData();"order"===a&&ta("cakes.add",b,function(a){fe.set(a)},"cake");this.N===h&&(this.N=T(this.f,"data-image","cake-image"));this.N.setData(b.image);return g}return i};var pe=new me;window.onFlashReady=s(pe.Lc,pe);window.confirmShapeChange=s(pe.Ic,pe);window.openMessageBox=Rb;
window.onDecoElementsLoaded=s(pe.Kc,pe);Sc.designer_step=pe;function qe(){Y.call(this);this.Vb=h;this.B=s(this.B,this);this.ba=s(this.ba,this);this.R="template-transformer,data-image-copy,datepicker,form,popup,popup-button".split(",")}q(qe,Y);o=qe.prototype;
o.pa=function(){this.Vb=T(this.f,"template-transformer","order-form");var a=this,b=Xb(T(this.f,"popup-button","recipe-popup")),c=T(this.f,"template-transformer","recipes-list"),e=T(this.f,"form","recipes-list");b.addEventListener("popup-apply",function(){var a=e.Fa("recipe_id"),a=ua(ee,a.shift());ge.set(a)});b=T(this.f,"form","order-form");b.addEventListener("result",function(){a.tb.navigate("result")});hc(b);ee.addEventListener("update",function(a,b){c.ua(J(b,fe.get()))})};
o.open=function(){ge.clear();Z.addEventListener("update",this.B);fe.addEventListener("update",this.ba);ge.addEventListener("update",this.ba);this.ba();var a=Z.get();a!==h&&ee.load({bakery_id:a.id})};o.close=function(){Z.removeEventListener("update",this.B);fe.addEventListener("update",this.ba);ge.addEventListener("update",this.ba)};o.B=function(){var a=Z.get();a!==h&&ee.load({bakery_id:a.id});this.tb.navigate("title")};
o.ba=function(){var a=he.get();a===h&&(a=new Vd,he.set(a));a.da=fe.get();a.Ta=Z.get();a.ab=ge.get();this.Vb.ua(J(a))};var re=new qe;Sc.order_step=re;function se(){Y.call(this);this.R=["data-image-copy"]}q(se,Y);var te=new se;Sc.result_step=te;function ue(){Y.call(this);this.U=this.N=this.eb=h;this.Oa=s(this.Oa,this);this.La=s(this.La,this);this.R=["data-image-copy","button-group"]}q(ue,Y);ue.prototype.open=function(){this.N!==h&&this.eb!==h&&(this.eb.value=this.N.getData())};
ue.prototype.pa=function(){this.eb=w("#download_data_input");this.N=T(this.f,"data-image-copy","cake-image");var a=this,b=this.f.J["button-group"]!==d&&this.f.J["button-group"][0]!==d?this.f.J["button-group"][0]:h;b.addEventListener("publish",function(){this.U===h?ve(this,this.La):we(this,this.La)});b.addEventListener("notify",function(){a.U===h?ve(a,a.Oa):we(a,a.Oa)})};
function xe(a,b){for(var c=0,e=b.length,f=h;c<e;){f=b[c];if("\u041c\u043e\u0438 \u0442\u043e\u0440\u0442\u0438\u043a\u0438"===f.title&&'\u0418\u0437 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f "\u0424\u043e\u0442\u043e \u041d\u0430 \u0422\u043e\u0440\u0442\u0435"'===f.description){a.U=f.aid;break}c++}}
function ve(a,b){function c(){FAPI.Client.call({method:"photos.getAlbums"},function(c,f){"ok"===c&&(xe(a,f.albums),a.U===h?FAPI.Client.call({method:"photos.createAlbum",title:"\u041c\u043e\u0438 \u0442\u043e\u0440\u0442\u0438\u043a\u0438",description:'\u0418\u0437 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f "\u0424\u043e\u0442\u043e \u041d\u0430 \u0422\u043e\u0440\u0442\u0435"',type:"friends"},function(c,e){"ok"===c&&(a.U=e,we(a,b))}):we(a,b))})}FAPI.Client.call({method:"users.hasAppPermission",
ext_perm:"PHOTO CONTENT"},function(a,b){b?c():(window.zc=function(a,b){"ok"===b&&"showPermissions"===a&&c();window.zc=h},FAPI.UI.showPermissions('["PHOTO CONTENT"]'))})}
function we(a,b){ta("social.ok.uploadImage",{image:a.N.getData(),upload_url:"http://api.odnoklassniki.ru/api/photos/upload",album_id:a.U,session_key:FAPI.Client.sessionKey,application_key:FAPI.Client.applicationKey,secret_key:FAPI.Client.sessionSecretKey},function(){FAPI.Client.call({method:"photos.getUserAlbumPhotos",aid:a.U,pagingDirection:"backward",count:1},function(a,e){b(e.photos.shift())})})}
ue.prototype.Oa=function(a){FAPI.UI.showNotification("\u0421\u043c\u043e\u0442\u0440\u0438 \u043a\u0430\u043a\u043e\u0439 \u0443 \u043c\u0435\u043d\u044f \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0441\u044f \u0442\u043e\u0440\u0442!","ok_cake_url="+(a?ye(a.standard_url):"url"))};
ue.prototype.La=function(a){var a=a?ye(a.standard_url):"url",b={application_key:FAPI.Client.applicationKey,session_key:FAPI.Client.sessionKey,format:FAPI.Client.format,method:"stream.publish",message:"\u0441\u0434\u0435\u043b\u0430\u043b\u0430 \u0442\u043e\u0440\u0442!",attachment:JSON.stringify({caption:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0442\u043e\u0440\u0442\u0438\u043a! \u0417\u0430\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0439 \u0438\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0434\u0440\u0443\u0437\u044c\u044f\u043c!",
media:[{href:"link",src:a,type:"image"}]}),action_links:JSON.stringify([{text:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u043e\u0440\u0442\u0438\u043a!",href:"ok_cake_url="+a},{text:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0432\u043e\u0439!",href:"action=create"}])},a=FAPI.Util.calcSignature(b,FAPI.Client.sessionSecretKey);window.API_callback=function(a,e,f){"ok"===e&&FAPI.Client.call(b,function(a,b,c){"ok"===a?Rb("\u0422\u043e\u0440\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d!"):
Rb(JSON.stringify(c))},f);window.API_callback=h};FAPI.UI.showConfirmation("stream.publish","\u0417\u0430\u043f\u043e\u0441\u0442\u0438\u0442\u044c \u0432 \u043b\u0435\u043d\u0442\u0443?",a)};function ye(a){var b=a.split("photoId=").pop().split("&").shift();return a.split("//").pop().split(".").shift()+"/"+b}var ze=new ue;Sc.share_step=ze;})();

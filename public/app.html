<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        
        <title>Заказ торта</title>

        <link rel="stylesheet/less" type="text/css" href="/css/style.less">
        
        <script src="/js/lib/less.js" type="text/javascript"></script>
    </head>
        
    <body>

        <div class="j-item-selector container">
            <div id="title_step"
                 class="j-selection-item j-template-container step current"
                 data-template-id="title_template"
                 data-template-url="/templates/title.html"
                 data-db-path="view"></div>

            <div id="first_step"
                 class="j-selection-item j-template-container step"
                 data-template-id="first_step_template"
                 data-template-url="/templates/first-step.html"
                 data-db-path="view"></div>

            <div id="second_step"
                 class="j-selection-item j-template-container step"
                 data-template-id="second_step_template"
                 data-template-url="/templates/second-step.html"
                 data-db-path="view"
                 data-init-on="ui-select"></div>


            <div id="third_step"
                 class="j-selection-item j-template-container step"
                 data-template-url="/templates/third-step.html"
                 data-init-on="ui-select"></div>
        </div>

        <script src="/js/lib/tuna.js"></script>

        <script src="/js/lib/tuna/utils/i-notifier.js"></script>
        <script src="/js/lib/tuna/utils/notifier.js"></script>

        <script src="/js/lib/tuna/net/i-request.js"></script>
        <script src="/js/lib/tuna/net/request.js"></script>

        <script src="/js/lib/tuna/dom.js"></script>

        <script src="/js/lib/tuna/tmpl/spot.js"></script>
        <script src="/js/lib/tuna/tmpl/attribute.js"></script>
        <script src="/js/lib/tuna/tmpl/list.js"></script>
        <script src="/js/lib/tuna/tmpl/template.js"></script>
        <script src="/js/lib/tuna/tmpl/markup-template-builder.js"></script>
        <script src="/js/lib/tuna/tmpl/i-compiled-unit.js"></script>
        <script src="/js/lib/tuna/tmpl/compiled-unit.js"></script>
        <script src="/js/lib/tuna/tmpl/compiled-spot.js"></script>
        <script src="/js/lib/tuna/tmpl/compiled-attribute.js"></script>
        <script src="/js/lib/tuna/tmpl/compiled-list.js"></script>
        <script src="/js/lib/tuna/tmpl/compiled-template.js"></script>
        <script src="/js/lib/tuna/tmpl/i-template-compiler.js"></script>
        <script src="/js/lib/tuna/tmpl/template-compiler.js"></script>
        <script src="/js/lib/tuna/tmpl/template-transformer.js"></script>
        <script src="/js/lib/tuna/tmpl/data-node.js"></script>
        <script src="/js/lib/tuna/tmpl/path-evaluator.js"></script>
        <script src="/js/lib/tuna/tmpl/i-transform-handler.js"></script>

        <script src="/js/lib/tuna/ui/container.js"></script>
        <script src="/js/lib/tuna/ui/data-container.js"></script>
        <script src="/js/lib/tuna/ui/template-container.js"></script>
        <script src="/js/lib/tuna/ui/item-selector.js"></script>
        
        <script src="/js/lib/tuna/ui/modules.js"></script>
        <script src="/js/lib/tuna/ui/modules/module.js"></script>
        <script src="/js/lib/tuna/ui/modules/template-container.js"></script>
        <script src="/js/lib/tuna/ui/modules/item-selector.js"></script>

        <script src="/js/lib/tuna/control/data-dispatcher.js"></script>
        <script src="/js/lib/tuna/control/view-controller.js"></script>

        <script src="/js/lib/jquery/jquery-1.6.4.js"></script>

        <script src="/js/lib/jquery/ui/jquery.ui.core.js"></script>
        <script src="/js/lib/jquery/ui/jquery.ui.widget.js"></script>
        <script src="/js/lib/jquery/ui/jquery.ui.mouse.js"></script>
        <script src="/js/lib/jquery/ui/jquery.ui.slider.js"></script>

        <script src="/js/lib/sizzle.js"></script>
        <script src="/js/lib/json.js"></script>
        <script src="/js/lib/swfobject.js"></script>

        <script src="/js/src/ui/popup.js"></script>
        <script src="/js/src/ui/carousel.js"></script>

        <script src="/js/src/ui/modules/swf.js"></script>
        <script src="/js/src/ui/modules/popup.js"></script>
        <script src="/js/src/ui/modules/slider.js"></script>
        <script src="/js/src/ui/modules/carousel.js"></script>

        <script src="/js/src/view/title.js"></script>
        <script src="/js/src/view/first-step.js"></script>
        <script src="/js/src/view/second-step.js"></script>
        <script src="/js/src/view/third-step.js"></script>
        <script src="/js/src/view/selection-popup.js"></script>

        <!-- Инициализация -->
        <script>
            var DIMENSIONS_URL = '/api/dimensions.php';
            var RECIPES_URL = '/api/recipes.php';
            var PHOTO_GALLERY_URL = '/api/photo-gallery.php';

            // Хранилище
            var db = new tuna.control.DataDispatcher();

            // Контейнер страницы
            var body = new tuna.ui.DataContainer(document.body);
            body.setDB(db); // Глобальное хранилище
            body.requireModule('template-container'); // модули
            body.requireModule('item-selector');
            body.initModules();
        </script>
    </body>
</html>